<% @posts.each do |p| %>
  <div>
    <% if current_user != User.where(id: p.user_id).first %>
      <h3><%= User.where(id: p.user_id).first.name %></h3>
      <h2><%= p.title %></h2>
      <p><%= p.body %></p>
      <%= link_to "See Post", p %>
      <h3>Like</h3>
      <ul>
        <% Comment.where(post_id: p.id).each do |c| %>
          <li>
            <h3><%= User.find(c.user_id).name %></h3>
            <p><%= c.body %></p>
          </li>
        <% end %>
      </ul>
      <%= form_with model: @comment do |form| %>
        <div>
          <%= form.hidden_field :user_id, {value: current_user.id} %>
          <%= form.hidden_field :post_id, {value: p.id} %>
          <%= form.label :body, "Comment" %>
          <%= form.text_area :body, {placeholder: "Your Text Here"} %>
          <%= form.submit "Add" %>
        </div>
      <% end %>
      <h3>Follow</h3>
    <% else %>
      <h3><%= User.where(id: p.user_id).first.name %></h3>
      <h2><%= p.title %></h2>
      <p><%= p.body %></p>
      <%= link_to "See Post", p %>
      <ul>
        <% Comment.where(post_id: p.id).each do |c| %>
          <li>
            <h3><%= User.find(c.user_id).name %></h3>
            <p><%= c.body %></p>
          </li>
        <% end %>
      </ul>
      <%= form_with model: @comment do |form| %>
        <div>
          <%= form.hidden_field :user_id, {value: current_user.id} %>
          <%= form.hidden_field :post_id, {value: p.id} %>
          <%= form.label :body, "Comment" %>
          <%= form.text_area :body, {placeholder: "Your Text Here"} %>
          <%= form.submit "Add" %>
        </div>
      <% end %>
    <% end %>
  </div>
<% end %>
<%= link_to "Home", :root %>


